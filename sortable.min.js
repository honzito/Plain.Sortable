window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);
SortableTable=function(a){var b=this,c=null;this.table=a;this.rows=[].slice.call(a.tBodies[0].rows);this.headerRow=a.tHead?a.tHead.rows[0]:this.rows.shift();this.headers=this.headerRow.querySelectorAll("th");this.headers.forEach(function(a){var d=document.createElement("span");a.childNodes.forEach(function(a){d.appendChild(a)});a.appendChild(d);d.onclick=function(){b.sortOnColumn(a,d)};a.hasAttribute("data-sortdefault")&&(c=d)});c&&c.click()};
SortableTable.find=function(a){document.querySelectorAll(a||"table.sortable").forEach(function(a){new SortableTable(a)})};SortableTable.prototype.simpleCompare=function(a,b){return a<b?-1:a==b?0:1};SortableTable.prototype.localtextCompare=function(a,b){return a.localeCompare(b)};SortableTable.prototype.compareComposer=function(a){var b=this;return function(c,e){return b.simpleCompare(a(c),a(e))}};
SortableTable.prototype.compareFunction=function(a){switch(a){case "caseSensitive":return this.localtextCompare;case "integer":return this.compareComposer(function(a){return parseInt(a.replace(/\s/g,"").replace(/^.*?(\d+).*$/,"$1"))});case "float":return this.compareComposer(function(a){return parseFloat(a.replace(/\s/g,"").replace(/^.*?([\d\.]+).*$/,"$1"))});case "date":return this.compareComposer(Date.parse);default:return this.localtextCompare}};
SortableTable.prototype.getText=function(a){return a.text=a.getAttribute("data-sortval")||a.text||a.textContent||a.innerText||a.innerHTML||""};SortableTable.prototype.getCellText=function(a,b){a.cellTexts=a.cellTexts||[];if(!a.cellTexts[b])try{a.cellTexts[b]=this.getText(a.querySelectorAll("td,th")[b])}catch(c){a.cellTexts[b]="~~~~~~"}return a.cellTexts[b]};
SortableTable.prototype.sortOnColumn=function(a,b){var c=[].slice.call(this.headerRow.cells).indexOf(a);this.headers.forEach(function(a){a.classList.remove("sortup")});this.headers.forEach(function(a){a.classList.remove("sortdown")});var e=this.compareFunction(a.getAttribute("data-sort"));b.order=b.order||1;var d=this;this.rows.sort(function(a,f){return b.order*e(d.getCellText(a,c),d.getCellText(f,c))});b.order*=-1;a.classList.add(1==b.order?"sortup":"sortdown");var f=this.table.tBodies[0];this.rows.forEach(function(a){f.appendChild(a)})};
